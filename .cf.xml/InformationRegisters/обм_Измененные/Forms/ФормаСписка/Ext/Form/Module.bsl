&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	УправлениеДиалогом();
	
КонецПроцедуры

&НаКлиенте
Процедура КОтправке(Команда) 
	
	Если Элементы.Список.ТекущиеДанные = Неопределено Тогда
		Возврат;
		
	КонецЕсли; 
	
	оставитьРегистрацию = Команда.Имя = "АдресацияКОтправкеБезУдаленияРегистрации";
	
	обм.АдресацияКОтправке(Элементы.Список.ТекущиеДанные.Ссылка, Элементы.Список.ТекущиеДанные.ВерсияДанных, , , , оставитьРегистрацию);
	
	Элементы.Список.Обновить();
	
КонецПроцедуры

&НаСервере
Процедура УправлениеДиалогом()
	
	Если Элементы.Список.Видимость Тогда
		Элементы.Список.Обновить();
		
	КонецЕсли; 
	
	Если Элементы.ФормаПереключитьРегламентное.Видимость Тогда
		регламентное = Регламентное_Получить();
		
		заголовокКнопки = Неопределено;
		картинкаКнопки = Неопределено;
		Если регламентное.Использование Тогда
			заголовокКнопки = "Задание работает";
			картинкаКнопки = БиблиотекаКартинок.ОформлениеКругЗеленый;
			
		ИначеЕсли Не регламентное.Использование Тогда
			заголовокКнопки = "Задание отключено";
			картинкаКнопки = БиблиотекаКартинок.ОформлениеКругПустой;
			
		КонецЕсли;

		Элементы.ФормаПереключитьРегламентное.Заголовок = заголовокКнопки;
		Элементы.ФормаПереключитьРегламентное.Картинка = картинкаКнопки;
					
	КонецЕсли; 		

КонецПроцедуры

&НаСервере
Процедура ПереключитьРегламентноеНаСервере()
	
	регламентное = Регламентное_Получить();
	
	использование = регламентное.Использование;
	
	регламентное.Использование = Не использование;
	регламентное.Записать();
	
	УправлениеДиалогом();

КонецПроцедуры

&НаКлиенте
Процедура ПереключитьРегламентное(Команда)
	
	ПереключитьРегламентноеНаСервере();
	
КонецПроцедуры 

Функция Регламентное_Получить()
	
	Возврат РегламентныеЗадания.НайтиПредопределенное(Метаданные.РегламентныеЗадания.обм_Отправка_АдресацияИзмененных);
	
КонецФункции

 &НаКлиенте
Процедура ОткрытьОбработчикАдресацииИзмененных(Команда)
	
	ПоказатьЗначение(,ПредопределенноеЗначение("Справочник.общ_Обработчики.обм_Измененные_Адресация"));
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьОбработчикФормированияСообщения(Команда)
	
	ПоказатьЗначение(,ПредопределенноеЗначение("Справочник.общ_Обработчики.обм_СфомироватьОбразОбъекта"));
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьОбработчикФормированияСообщенияДляУзла(Команда)
	
	ПоказатьЗначение(,ПредопределенноеЗначение("Справочник.общ_Обработчики.обм_СфомироватьОбразОбъектаДляУзла"));
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьОбработчикРегистрацииИзмененныхПриЗаписи(Команда)
	
	ПоказатьЗначение(,ПредопределенноеЗначение("Справочник.общ_Обработчики.обм_Измененные_РегистрироватьПриЗаписи"));
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьОбработчикРегистрацииИзмененныхПриОбмене(Команда)
	
	ПоказатьЗначение(,ПредопределенноеЗначение("Справочник.общ_Обработчики.обм_Измененные_РегистрироватьПриЗаписи"));
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьОбработчикОтправкиСообщения(Команда)
	
	ПоказатьЗначение(,ПредопределенноеЗначение("Справочник.общ_Обработчики.обм_ОтправитьПослание"));
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьСписокОбработчиков(Команда)
	
	ОткрытьФорму("Справочник.общ_Обработчики.ФормаСписка");
	
КонецПроцедуры
